<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../../juicy-jsoneditor/src/juicy-jsoneditor.html">

<template>
  <style>
    juicy-jsoneditor {
      max-height: 50vh;
    }

    juicy-jsoneditor /deep/ .jsoneditor,
    juicy-jsoneditor /deep/ .jsoneditor div.outer,
    juicy-jsoneditor /deep/ .jsoneditor div.tree {
      overflow: hidden;
    }
  </style>

  <juicy-jsoneditor></juicy-jsoneditor>
</template>

<script>
  (function (window, document) {
    var thatDoc = document;

    var thisDoc = (thatDoc._currentScript || thatDoc.currentScript).ownerDocument;

    var template = thisDoc.querySelector('template').content;

    var element = Object.create(HTMLElement.prototype);

    element.createdCallback = function () {
      this.createShadowRoot();
    };

    element.attachedCallback = function () {
      var puppet = document.querySelector('puppet-js');

      if (puppet) {
        var clone = thatDoc.importNode(template, true);
        clone.querySelector('juicy-jsoneditor').json = puppet.obj;
        this.shadowRoot.appendChild(clone);
      }
    };

    document.registerElement('puppet-js-view-model-tree', {
      prototype: element
    });
  }(window, document));
</script>
