(function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=1)})([function(a){var b=function(){return this}();try{b=b||Function('return this')()||(1,eval)('this')}catch(a){'object'==typeof window&&(b=window)}a.exports=b},function(a,b,c){'use strict';Object.defineProperty(b,'__esModule',{value:!0});var d=c(2),e=c.n(d),f=c(3),g=c.n(f);(function(){window.addEventListener('sc-debug-show-popup',()=>{const a=localStorage.getItem('scDebugPopupIndexScriptUrl'),b=window.open('','starcounterDebugAidPopupWindow','width=1200,height=500, toolbar=0,location=0,menubar=0');window.name='parent-starcounter-app-window',b&&b.closeTimeout&&clearTimeout(b.closeTimeout),b.document.head.innerHTML=`
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <title>Starcounter - Debug</title>`,b.document.body.innerHTML=`<div id="app"></div>`,b.title='Starcounter DevTools';const c=b.document.createElement('SCRIPT');c.src=a,b.document.body.appendChild(c),window.localStorage.setItem('starcounterDebug-popup-open',!0),b.onbeforeunload=()=>{window.localStorage.setItem('starcounterDebug-popup-open',!1)},window.addEventListener('beforeunload',function a(){b&&b.closeLater(),window.removeEventListener('beforeunload',a)})})})()},function(){(function(a){const b=+(localStorage['starcounter-debug-aid-patch-history-length']||100);a.starcounterDebugAidListener=new class{constructor(){this.rows=[],this.lastRequest=null,this.lastResponse=null,this.isListening=!1,this.onPatchReceived=this.onPatchReceived.bind(this),this.onPatchApplied=this.onPatchApplied.bind(this),this.onPatchSent=this.onPatchSent.bind(this),this.onSocketStateChanged=this.onSocketStateChanged.bind(this),this.updateListeners=[]}onPatchApplied(){this.updateListeners.forEach((a)=>a())}formatDate(a){return[a.getFullYear(),'-',a.getMonth()+1,'-',a.getDate(),' ',a.getHours(),':',a.getMinutes(),':',a.getSeconds(),'.',a.getMilliseconds()].join('')}formatTime(a){return[a.getHours(),':',a.getMinutes(),':',a.getSeconds(),'.',a.getMilliseconds()].join('')}formatDuration(a){const b=a%1e3;a=(a-b)/1e3;const c=a%60;a=(a-c)/60;const d=a%60,e=(a-d)/60,f=[];return e&&f.push(e,'h '),(e||d)&&f.push(d,'m '),(e||d||c)&&f.push(c,'s '),f.push(b,'ms'),f.join('')}createRow(a,b,c,d,e,f){let g=null;null==b?b='Nothing was sent':'string'==typeof b?g=JSON.parse(b):'object'==typeof b&&(g=b,b=JSON.stringify(g));const h=g&&g.statusCode?g.statusCode:200,i=new Date,j={date:this.formatDate(i),time:this.formatTime(i),duration:f,direction:a,url:c,path:c.replace(/^[a-z]+[:][/][/][^/]*/gi,''),data:b,method:d,statusCode:h,json:g,index:e};return this.updateListeners.forEach((a)=>a()),j}getPalindromClient(){let a=window.document;window.scDebugPopUpShown&&(a=window.opener.document);const b=a.querySelector('palindrom-client, puppet-client');return b?b:void console.warn('Neither palindrom-client nor puppet-client elements were found!')}pushRow(a){this.rows.push(a),this.rows.length>b&&this.rows.shift()}onPatchReceived(a){this.lastResponse=new Date;let b='N/A';this.lastResponse&&this.lastRequest&&(b=this.formatDuration(this.lastResponse-this.lastRequest)),this.pushRow(this.createRow('receive',a.detail.data,a.detail.url,a.detail.method,this.rows.length,b))}onPatchSent(a){this.lastRequest=new Date,this.pushRow(this.createRow('send',a.detail.data,a.detail.url,a.detail.method,this.rows.length))}onSocketStateChanged(a){const b={state:a.detail.state,url:a.detail.url,data:a.detail.data,code:a.detail.code,reason:a.detail.reason};this.pushRow(this.createRow('state',b,a.detail.url,'STATE',this.rows.length))}startListen(){if(!this.isListening){const a=this.getPalindromClient();a&&(this.isListening=!0,a.addEventListener('patchreceived',this.onPatchReceived),a.addEventListener('patchsent',this.onPatchSent),a.addEventListener('patch-applied',this.onPatchApplied),a.addEventListener('socketstatechanged',this.onSocketStateChanged))}}stopListen(){if(this.isListening){const a=this.getPalindromClient();a&&(a.removeEventListener('patchreceived',this.onPatchReceived),a.removeEventListener('patchsent',this.onPatchSent),a.removeEventListener('socketstatechanged',this.onSocketStateChanged),a.removeEventListener('patch-applied',this.onPatchApplied),this.isListening=!1)}}clear(){this.rows.splice(0,this.rows.length)}},a.starcounterDebugAidListener.startListen()})(window)},function(a,b,c){(function(a){function d(a,b){this._id=a,this._clearFn=b}var e='undefined'!=typeof a&&a||'undefined'!=typeof self&&self||window,f=Function.prototype.apply;b.setTimeout=function(){return new d(f.call(setTimeout,e,arguments),clearTimeout)},b.setInterval=function(){return new d(f.call(setInterval,e,arguments),clearInterval)},b.clearTimeout=b.clearInterval=function(a){a&&a.close()},d.prototype.unref=d.prototype.ref=function(){},d.prototype.close=function(){this._clearFn.call(e,this._id)},b.enroll=function(a,b){clearTimeout(a._idleTimeoutId),a._idleTimeout=b},b.unenroll=function(a){clearTimeout(a._idleTimeoutId),a._idleTimeout=-1},b._unrefActive=b.active=function(a){clearTimeout(a._idleTimeoutId);var b=a._idleTimeout;0<=b&&(a._idleTimeoutId=setTimeout(function(){a._onTimeout&&a._onTimeout()},b))},c(4),b.setImmediate='undefined'!=typeof self&&self.setImmediate||'undefined'!=typeof a&&a.setImmediate||this&&this.setImmediate,b.clearImmediate='undefined'!=typeof self&&self.clearImmediate||'undefined'!=typeof a&&a.clearImmediate||this&&this.clearImmediate}).call(b,c(0))},function(a,b,c){(function(a,b){(function(a){'use strict';function c(a){'function'!=typeof a&&(a=new Function(''+a));for(var b=Array(arguments.length-1),c=0;c<b.length;c++)b[c]=arguments[c+1];var d={callback:a,args:b};return o[n]=d,m(n),n++}function d(a){delete o[a]}function e(a){var b=a.callback,c=a.args;switch(c.length){case 0:b();break;case 1:b(c[0]);break;case 2:b(c[0],c[1]);break;case 3:b(c[0],c[1],c[2]);break;default:b.apply(void 0,c);}}function f(a){if(p)setTimeout(f,0,a);else{var b=o[a];if(b){p=!0;try{e(b)}finally{d(a),p=!1}}}}function g(){m=function(a){b.nextTick(function(){f(a)})}}function h(){if(a.postMessage&&!a.importScripts){var b=!0,c=a.onmessage;return a.onmessage=function(){b=!1},a.postMessage('','*'),a.onmessage=c,b}}function i(){var b='setImmediate$'+Math.random()+'$',c=function(c){c.source===a&&'string'==typeof c.data&&0===c.data.indexOf(b)&&f(+c.data.slice(b.length))};a.addEventListener?a.addEventListener('message',c,!1):a.attachEvent('onmessage',c),m=function(c){a.postMessage(b+c,'*')}}function j(){var a=new MessageChannel;a.port1.onmessage=function(a){var b=a.data;f(b)},m=function(b){a.port2.postMessage(b)}}function k(){var a=q.documentElement;m=function(b){var c=q.createElement('script');c.onreadystatechange=function(){f(b),c.onreadystatechange=null,a.removeChild(c),c=null},a.appendChild(c)}}function l(){m=function(a){setTimeout(f,0,a)}}if(!a.setImmediate){var m,n=1,o={},p=!1,q=a.document,r=Object.getPrototypeOf&&Object.getPrototypeOf(a);r=r&&r.setTimeout?r:a,'[object process]'==={}.toString.call(a.process)?g():h()?i():a.MessageChannel?j():q&&'onreadystatechange'in q.createElement('script')?k():l(),r.setImmediate=c,r.clearImmediate=d}})('undefined'==typeof self?'undefined'==typeof a?this:a:self)}).call(b,c(0),c(5))},function(a){function b(){throw new Error('setTimeout has not been defined')}function c(){throw new Error('clearTimeout has not been defined')}function d(a){if(j===setTimeout)return setTimeout(a,0);if((j===b||!j)&&setTimeout)return j=setTimeout,setTimeout(a,0);try{return j(a,0)}catch(b){try{return j.call(null,a,0)}catch(b){return j.call(this,a,0)}}}function e(a){if(k===clearTimeout)return clearTimeout(a);if((k===c||!k)&&clearTimeout)return k=clearTimeout,clearTimeout(a);try{return k(a)}catch(b){try{return k.call(null,a)}catch(b){return k.call(this,a)}}}function f(){o&&m&&(o=!1,m.length?n=m.concat(n):p=-1,n.length&&g())}function g(){if(!o){var a=d(f);o=!0;for(var b=n.length;b;){for(m=n,n=[];++p<b;)m&&m[p].run();p=-1,b=n.length}m=null,o=!1,e(a)}}function h(a,b){this.fun=a,this.array=b}function i(){}var j,k,l=a.exports={};(function(){try{j='function'==typeof setTimeout?setTimeout:b}catch(a){j=b}try{k='function'==typeof clearTimeout?clearTimeout:c}catch(a){k=c}})();var m,n=[],o=!1,p=-1;l.nextTick=function(a){var b=Array(arguments.length-1);if(1<arguments.length)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];n.push(new h(a,b)),1!==n.length||o||d(g)},h.prototype.run=function(){this.fun.apply(null,this.array)},l.title='browser',l.browser=!0,l.env={},l.argv=[],l.version='',l.versions={},l.on=i,l.addListener=i,l.once=i,l.off=i,l.removeListener=i,l.removeAllListeners=i,l.emit=i,l.prependListener=i,l.prependOnceListener=i,l.listeners=function(){return[]},l.binding=function(){throw new Error('process.binding is not supported')},l.cwd=function(){return'/'},l.chdir=function(){throw new Error('process.chdir is not supported')},l.umask=function(){return 0}}]);